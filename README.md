[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Version](https://img.shields.io/badge/version-1.0-blue.svg)](VERSION)

## Description

This application was developed by Biomedical Informatics students at the University of São Paulo, Ribeirão Preto campus, as part of the "Fundamentals of Medical Imaging" course. The goal of the app is to automate a repetitive process used in a master's project related to medical imaging.

## Table of Contents

- [About](#about)
- [Installation](#installation)
- [Usage](#usage)
- [Processing](#processing)
- [License](#license)
- [Acknowledgements](#acknowledgements)

## About

Development Environment: VSCodium (vscode fork project) with virtualenv for dependencies control.

#### Dependencies

##### Geral

- Python 3.11.9
- Virtualenv

##### Processing

- Pandas
- CV2
- Numpy
- Matplotlib

##### Interface

- PyQT6

#### Methods

- cv2.imread
- cv2.cvtcolor (BGR2RGB)
- color thresholding (lower and upper RGB)
- cv2.inRange
- cv2.bitwise_and
- plt.figure
- cv2.cvtColor (BGR2GRAY)
- cv2.GaussianBlur
- cv2.Canny
- cv2.dilate
- cv2.findContours
- cv2.contourArea
- cv2.arcLength
  - circularity and perimeter limits
- cv2.drawContours

## Installation

### Prerequisites

- Python 3.x
- pip

### Steps

1. Clone the repository:
   ```bash
   git clone https://github.com/josearandrade/grupyum.git
   ```
2. Navigate to the project directory:
   ```bash
   cd grupyum
   ```
3. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

## Usage

1. Run widget.py:
   ```bash
   python gui/widget.py
   ```

## Processing

- ##### cv2.imread

  - Loads the image in BGR format.
  - Used for color space conversion (cv2.cvtColor) and to generate the final image with a white background.


<img src="https://i.imgur.com/PyNVaRa.png" alt="cv2.imread" width="400" style="display: block; margin: auto;">

- ##### cv2.cvtColor (BGR2RGB) and cv2.cvtColor (BGR2GRAY)

  - The first converts the image to RGB (for matplotlib display), and the second to grayscale (to simplify subsequent steps).
  - The result of the BGR-to-grayscale conversion is used as input for cv2.threshold.
- ##### Color thresholding (lower and upper RGB)

  - Applies a thresholding operation that converts a grayscale image into a binary image (black and white).
  - This binary mask serves as input for the next method, cv2.bitwise_not.
- ##### cv2.inRange

  - Creates a binary mask by segmenting pixels of interest based on a range of values; it's a practical implementation of the thresholding concept.

<img src="https://i.imgur.com/DkInCYX.png" alt="cv2.imread" width="400" style="display: block; margin: auto;">

- ##### cv2.bitwise_and

  - Uses the mask created in cv2.inRange to isolate the segmented pixels from the original image.

- ##### cv2.Canny

  - Detects edges based on intensity gradients.
  - Uses the output from cv2.GaussianBlur to avoid false edges, and its output serves as input for cv2.dilate.

  <img src="https://i.imgur.com/wOZYxUf.png" alt="cv2.imread" width="400" style="display: block; margin: auto;">

- ##### cv2.findContours

  - Identifies the contours of connected regions in a binary image.
  - Uses the image generated by cv2.dilate.
- ##### cv2.contourArea

  - Calculates the area of each contour.
  - Takes input from the output of cv2.findContours. It is used to compare contour sizes with the defined limits (minimum and maximum).
- ##### cv2.arcLength

  - Calculates the perimeter of each contour.
  - Used alongside cv2.contourArea to calculate the circularity of each contour and apply the shape filter.
- ##### Circularity and perimeter limits

  - Used as criteria to filter contours by shape and size. Circularity helps filter contours that are approximately circular from other shapes.
  - Circularity calculation depends on the perimeter (obtained with cv2.arcLength); otherwise, it cannot be computed.
- ##### cv2.drawContours

  - Draws contours on the original image, using those filtered by size and circularity.
  - Directly uses the output from cv2.findContours.

    <img src="https://i.imgur.com/POMbIcH.png" alt="cv2.imread" width="400" style="display: block; margin: auto;">

## License

This project is licensed under the MIT License.

## Acknowledgements

Thank any collaborators, mentors, or resources that helped in the development.
